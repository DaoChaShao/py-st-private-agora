<p align="right">
  Language Switch / 语言选择：
  <a href="./README.zh-CN.md">🇨🇳 中文</a> | <a href="./README.md">🇬🇧 English</a>
</p>

**应用简介**
---
PrivAgora
是一个去中心化的个人数据市场，让个人能够安全地共享、出售或购买合成个人数据。用户可以生成社交媒体、短视频、移动支付、健康与健身以及地图与导航等类别的数据。买家可以根据特定查询生成匿名数据集，而无需担心隐私泄露或依赖外部服务器。数据处理完全在本地进行。

**隐私声明**
---
本应用可能需要您输入个人信息或隐私数据，以生成定制建议和结果。但请放心，应用程序 **不会**
收集、存储或传输您的任何个人信息。所有计算和数据处理均在本地浏览器或运行环境中完成，**不会** 向任何外部服务器或第三方服务发送数据。

整个代码库是开放透明的，您可以随时查看 [这里](./) 的代码，以验证您的数据处理方式。

**相关研究与设计灵感**
---
PrivAgora 的架构深受近年来在 **私人数据查询系统（Private Data Query Systems, PDQS）** 和基于 **差分隐私**
约束下的数据交易市场研究的启发。特别是，它直接借鉴了论文 [_《Integrated Private Data Trading Systems for Data
Marketplaces》_](https://ebooks.iospress.nl/doi/10.3233/FAIA230420)
（点击 [这里获取 PDF](https://ebooks.iospress.nl/pdf/doi/10.3233/FAIA230420)）的设计思路。该论文由 **Weidong Li 等人**
撰写，提出了一个在数据交易环境中平衡 **隐私保护**、**数据效用** 与 **激励机制** 的理论框架。这一基础性研究在 PrivAgora
的 **定价机制**、**激励设计** 和 **隐私保护流程** 上提供了重要指导。

此外，**Weidong Li 女士**也是 PrivAgora 沙盒应用的科学与技术顾问。她的专业知识为演示系统中关键模块的实现提供了指导，确保了其在
**概念设计上忠实于 PDQS 的原始愿景**，同时适应更具 **交互性和应用性** 的实现场景。

Weidong Li 女士提出的 PDQS 框架，解决了私人数据市场中 **数据效用与隐私保护之间的核心矛盾**。传统系统通常将
**采购（即选择购买哪些数据）** 与 **查询（即如何统计信息）** 分开处理，导致数据需添加过多噪声，进而影响查询结果的准确性。相比之下，她提出的
**融合式方法** 能够同时确定：

- 从哪些 **数据拥有者** 处购买数据；
- 分配多少 **隐私预算**；
- 采用何种 **查询机制**；

从而在相同预算下，实现更高准确度的查询输出。

PrivAgora 采用了与 PDQS 相同的 **高级架构思路** —— 包括 **数据集估值**、**预算约束下的数据选择** 和 **结构化的查询输出**
，但在两个关键方面有所不同：

1. **虚拟数据**：  
   由于缺乏真实可用的数据集，PrivAgora 采用了**模拟数据**进行操作。这种方式使得我们可以在可控条件下开发与测试
   **定价机制与效用模型**，同时保留 PDQS 系统的整体流程与结构。

2. **面向用户的预算分配原型**：  
   尽管 Weidong Li 女士的研究侧重于通过 **神经网络** 和 **贪心算法** 实现在隐私约束下的效用最大化，PrivAgora 更加强调
   **用户可视的预算流向** 与 **激励机制透明度**，这也呼应了 **ECAI 2023** 提出的 **同步数据选择与数据扰动** 方法，以保障
   **激励兼容性** 与 **预算可行性**。

通过在 **可信研究成果** 基础上，适当 **放宽隐私约束**，PrivAgora 实现了一个基本功能的 **沙盒原型系统** —— 可用于模拟 PDQS
系统的 **经济机制与工作流**，并为将来在严格隐私保护下处理 **真实数据** 的部署打下基础。

**功能概览**
---

- 数据类别（以交互部分的形式）：
    - 社交媒体：点赞、评论、分享、观看时长等。
    - 短视频：视频类型、互动历史记录。
    - 移动支付：设备、方式、交易量/频率。
    - 健康与健身：锻炼、步数、卡路里、心率。
    - 地图鱼导航：旅行习惯、距离、通勤。
- 主要功能：
    - 🧪 为每个类别生成可按数量和时长配置的合成数据。
    - 💾 在 SQLite 中插入和管理合成数据。
    - 📂 展平嵌套的 JSON 内容以查看详细信息。
    - 💸 模拟数据交易：设置预算 → 使用背包求解器 → 按价格选择最优数据子集。
    - 📊 使用交互式数据编辑器表格可视化选定的记录。
    - 📈 通过基于 LLM 的 Markdown 报告分析交易数据。

**使用指南**
---

1. 数据生成与查看

- 前往“数据库创建与管理”页面 → “创建数据库”
- 然后，前往“数据生成、显示与插入”页面 → 选择类别 → “生成与显示数据” → 查看扁平化内容 → “将数据插入”到数据库。

2. 数据库管理

- 您可以在“数据库创建与管理”页面删除数据库。
- 您可以在“数据库创建与管理”页面查看所有数据。
- 您可以在“数据生成、显示与插入”页面查看类别数据。

3. 数据交易模拟器

- 前往“数据交易”子页面。
- 在 SQLite 中选择一个包含现有数据的类别以查看数据描述。
- 设置预算并进行交易。
- 系统会呈现可视化指标和选择表，以显示支出、商品数量和所选的扁平化数据。

4. 通过 LLM 进行分析

- 交易完成后，选择一个类别并选择“分析数据”。
- 提供您的 OpenAI 或 DeepSeek API 密钥。
- 指定语言（例如英语、中文）。
- LLM 返回结构化的 Markdown 分析：模式、趋势、用户资料等。

**快速开始**
---

1. 将本仓库克隆到本地计算机。
2. 使用以下命令安装所需依赖项：`pip install -r requirements.txt`
3. 使用以下命令运行应用程序：`streamlit run main.py`
4. 你也可以通过点击以下链接在线体验该应用：  
   [![Static Badge](https://img.shields.io/badge/Open%20in%20Streamlit-Daochashao-red?style=for-the-badge&logo=streamlit&labelColor=white)](https://smartcs.streamlit.app/)

**许可协议**
---
本应用基于 **BSD-3-Clause 许可证** 开源发布。您可以点击链接阅读完整协议内容：👉 [BSD-3-Clause License](./LICENSE)。

**日志生成**（CHANGELOG）
---
本指南概述了如何使用 git-changelog 自动生成并维护项目的变更日志的步骤。

1. 使用命令`pip install git-changelog`安装所需依赖项。
2. 执行`pip show git-changelog`或者`pip show git-changelog | grep Version`检查是否已正确安装该包及其版本。
3. 在项目根目录下准备`pyproject.toml`配置文件。
4. 更新日志遵循 [Conventional Commits](https://www.conventionalcommits.org/zh-hans/v1.0.0/) 提交规范。
5. 执行命令`git-changelog`创建`Changelog.md`文件。
6. 使用`git add Changelog.md`或图形界面将该文件添加到版本控制中。
7. 执行`git-changelog --output CHANGELOG.md`提交变更并更新日志。
8. 使用`git push origin main`或 UI 工具将变更推送至远程仓库。

**使用 Streamlit & Streamlit Cloud**
---

1. 使用命令`pip install streamlit`安装`Streamlit`平台。
2. 执行`pip show streamlit`或者`pip show git-streamlit | grep Version`检查是否已正确安装该包及其版本。  
